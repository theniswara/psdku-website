<app-navbar></app-navbar>

<div class="min-h-screen bg-[#F8FAFC] font-['Inter']">

  <div class="bg-[#051D47] pt-28 pb-32 px-4 md:px-16 relative overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-b from-transparent to-[#051D47]/95 z-10"></div>
    <div class="absolute inset-0 opacity-[0.05]" style="background-image: radial-gradient(#ffffff 1px, transparent 1px); background-size: 24px 24px;"></div>
    
    <div class="relative z-20 max-w-7xl mx-auto text-center">
      <h1 class="text-4xl md:text-5xl font-['Biryani'] font-bold text-white leading-tight mb-3">
        Direktori <span class="text-[#FF7F11]">Dosen</span>
      </h1>
      <p class="text-gray-300 text-lg max-w-2xl mx-auto font-light leading-relaxed">
        Temukan profil pengajar, keahlian, dan informasi akademik Polinema PSDKU Lumajang.
      </p>
    </div>
  </div>

  <ng-container *ngIf="dosenList | filterDosen:searchKeyword:selectedProdi as filteredList">

    <div class="px-4 md:px-8 -mt-12 relative z-30 mb-16">
      <div class="max-w-5xl mx-auto">
        
        <div class="bg-white rounded-xl shadow-[0_15px_40px_-10px_rgba(0,0,0,0.1)] p-2 flex flex-col md:flex-row gap-0 border border-gray-100">
          
          <div class="flex-1 relative group border-b md:border-b-0 md:border-r border-gray-100">
            <div class="absolute inset-y-0 left-0 pl-5 flex items-center pointer-events-none">
              <i class="fa-solid fa-magnifying-glass text-gray-400 group-focus-within:text-[#FF7F11] transition-colors"></i>
            </div>
            <input
              type="text"
              [(ngModel)]="searchKeyword"
              class="w-full pl-12 pr-4 py-4 bg-transparent border-none text-[#051D47] focus:ring-0 placeholder-gray-400 font-medium"
              placeholder="Cari nama, NIP, atau keahlian..."
            />
          </div>

          <div class="md:w-1/3 relative group">
            <div class="absolute inset-y-0 left-0 pl-5 flex items-center pointer-events-none">
              <i class="fa-solid fa-layer-group text-gray-400 group-focus-within:text-[#FF7F11] transition-colors"></i>
            </div>
            <select
              [(ngModel)]="selectedProdi"
              class="w-full pl-12 pr-10 py-4 bg-transparent border-none text-[#051D47] focus:ring-0 cursor-pointer font-medium appearance-none"
            >
              <option value="">Semua Program Studi</option>
              <option value="Teknologi Informasi">Teknologi Informasi</option>
              <option value="Teknik Sipil">Teknik Sipil</option>
              <option value="Akuntansi">Akuntansi</option>
            </select>
            <div class="absolute inset-y-0 right-0 pr-5 flex items-center pointer-events-none">
              <i class="fa-solid fa-chevron-down text-xs text-gray-400"></i>
            </div>
          </div>

          <button class="bg-[#051D47] hover:bg-[#FF7F11] text-white px-8 py-3 md:py-0 rounded-lg md:rounded-l-none md:rounded-r-lg font-bold transition-all duration-300 shadow-lg md:shadow-none m-2 md:m-0 flex items-center justify-center gap-2">
            Cari
          </button>
        </div>

        <div class="mt-4 flex justify-between px-2">
           <p class="text-sm text-gray-500 font-medium">
             Menampilkan <span class="font-bold text-[#051D47]">{{ filteredList.length }}</span> Dosen
           </p>
           <button *ngIf="searchKeyword || selectedProdi" 
                   (click)="searchKeyword=''; selectedProdi=''"
                   class="text-xs text-[#FF7F11] font-bold hover:underline">
             Reset Filter
           </button>
        </div>
      </div>
    </div>

    <div class="max-w-7xl mx-auto px-4 md:px-8 pb-24">
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-8">
        
        <div
          *ngFor="let d of filteredList"
          class="flex flex-col h-full rounded-2xl overflow-hidden bg-white shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-300 group border border-gray-100"
        >
          
          <div class="p-6 pb-5 flex flex-col items-center text-center relative z-10 bg-white">
             
             <div class="absolute top-4 right-4">
                <div class="flex items-center gap-1.5 px-2.5 py-1 rounded-full border transition-colors duration-300"
                     [ngClass]="isOnline(d) 
                        ? 'bg-green-50 border-green-200 text-green-700' 
                        : 'bg-gray-50 border-gray-200 text-gray-400'">
                  <div class="h-1.5 w-1.5 rounded-full" [ngClass]="isOnline(d) ? 'bg-green-500 animate-pulse' : 'bg-gray-400'"></div>
                  <span class="text-[10px] font-bold uppercase tracking-wider">{{ isOnline(d) ? 'Online' : 'Offline' }}</span>
                </div>
             </div>

             <div class="relative mb-4">
               <img
                 [src]="d.foto || 'assets/default-user.png'"
                 class="relative h-28 w-28 rounded-full object-cover border-[4px] border-white shadow-md bg-gray-100"
                 alt="{{ d.namaDosen }}"
               />
             </div>

             <h2 class="font-['Biryani'] font-bold text-xl text-[#051D47] leading-tight mb-1">
               {{ d.namaDosen }}
             </h2>
             <p class="text-sm font-['Inter'] text-[#FF7F11] font-bold uppercase tracking-wide mb-3">
               {{ d.prodi }}
             </p>

             <div class="flex flex-wrap justify-center gap-2 mt-1">
               <span class="px-2 py-0.5 text-[10px] font-bold text-gray-600 bg-gray-50 rounded border border-gray-200">
                 Web Development
               </span>
               <span class="px-2 py-0.5 text-[10px] font-bold text-gray-600 bg-gray-50 rounded border border-gray-200">
                 Algorithm
               </span>
             </div>
          </div>

          <div class="h-1 w-full bg-[#FF7F11] relative z-20"></div>

          <div class="mt-auto bg-[#0F2C56] text-white p-6 relative overflow-hidden flex flex-col gap-4">
            
            <div class="absolute inset-0 opacity-10 pointer-events-none" style="background-image: radial-gradient(circle at 2px 2px, rgba(255,255,255,0.3) 1px, transparent 0); background-size: 20px 20px;"></div>

            <div class="space-y-3 relative z-10">
              <div class="flex items-center gap-3 text-sm text-gray-300 group-hover:text-white transition-colors" title="{{ d.email }}">
                <div class="w-5 flex justify-center"><i class="fa-solid fa-envelope text-[#FF7F11]"></i></div>
                <span class="truncate font-medium text-gray-100 tracking-wide">{{ d.email }}</span>
              </div>
              
              <div class="flex items-center gap-3 text-sm text-gray-300 group-hover:text-white transition-colors">
                <div class="w-5 flex justify-center"><i class="fa-solid fa-id-badge text-[#FF7F11]"></i></div>
                <span class="font-medium text-gray-100 tracking-wide">NIDN: {{ d.nidn || '-' }}</span>
              </div>
            </div>

            <button
              [routerLink]="['/dosen', d.idDosen]"
              class="w-full mt-2 py-2.5 border border-white/20 hover:bg-[#FF7F11] hover:border-[#FF7F11] hover:text-white text-white rounded-lg text-xs font-bold uppercase tracking-widest transition-all duration-300 flex items-center justify-center gap-2 group/btn relative z-10"
            >
              Detail Profil
              <i class="fa-solid fa-arrow-right transition-transform group-hover/btn:translate-x-1"></i>
            </button>
          </div>

        </div>

      </div>

      <div *ngIf="filteredList.length === 0" 
           class="bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center max-w-lg mx-auto mt-8">
        <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 text-gray-400 mb-4">
          <i class="fa-solid fa-magnifying-glass text-2xl"></i>
        </div>
        <h3 class="text-lg font-['Biryani'] font-bold text-[#051D47] mb-2">Data Tidak Ditemukan</h3>
        <button (click)="searchKeyword = ''; selectedProdi = ''" 
                class="text-[#FF7F11] text-sm font-bold hover:underline">
          Reset Filter
        </button>
      </div>

    </div>
  </ng-container>

</div>
<app-footer></app-footer>