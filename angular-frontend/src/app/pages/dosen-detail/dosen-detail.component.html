<app-navbar></app-navbar>

<div class="min-h-screen bg-[#F8FAFC] pt-24 pb-24 px-4 md:px-8 lg:px-16 font-['Inter']">
  
  <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">

    <div class="lg:col-span-4 xl:col-span-3 lg:sticky lg:top-24 space-y-6">
      
      <div class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden">
        
        <div class="h-28 bg-[#051D47] relative overflow-hidden">
          <div class="absolute inset-0 opacity-20 bg-[radial-gradient(circle_at_center,#fff_1px,transparent_1px)] [background-size:16px_16px]"></div>
          <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-[#FF7F11] rounded-full blur-[60px] opacity-30"></div>
        </div>

        <div class="relative px-6 pb-8 text-center -mt-14">
          
          <div class="relative inline-block mb-4">
             <img
               [src]="dosen?.foto || 'assets/default-user.png'"
               alt="Foto Dosen"
               class="h-32 w-32 rounded-full object-cover border-[4px] border-white shadow-lg bg-white relative z-10"
             />
          </div>

          <div class="flex justify-center mb-5">
            <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full border transition-colors duration-300"
                 [ngClass]="isOnline(dosen) ? 'bg-green-50 border-green-200' : 'bg-gray-50 border-gray-200'">
                 
                 <span class="relative flex h-2.5 w-2.5">
                    <span *ngIf="isOnline(dosen)" class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                    <span [ngClass]="isOnline(dosen) ? 'bg-green-500' : 'bg-gray-400'" class="relative inline-flex rounded-full h-2.5 w-2.5"></span>
                 </span>
                 
                 <span class="text-xs font-bold uppercase tracking-wide"
                       [ngClass]="isOnline(dosen) ? 'text-green-700' : 'text-gray-500'">
                    {{ isOnline(dosen) ? 'Online' : 'Offline' }}
                 </span>
            </div>
          </div>

          <h1 class="text-xl font-['Biryani'] font-bold text-[#051D47] leading-tight">
            {{ dosen?.namaDosen }}
          </h1>
          
          <div class="flex flex-wrap justify-center gap-2 mt-2">
            <span class="px-3 py-1 bg-orange-50 text-[#FF7F11] text-xs font-bold uppercase tracking-wider rounded-full border border-orange-100">
              {{ dosen?.jabatan }}
            </span>
          </div>

          <p class="text-gray-500 text-sm mt-3 font-medium border-t border-gray-100 pt-3 inline-block w-full">
            {{ dosen?.prodi }}
          </p>
        </div>
      </div>

      <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6">
        <h3 class="text-xs font-['Biryani'] font-bold text-[#051D47] uppercase tracking-wider mb-5 pb-2 border-b border-gray-100 flex justify-between items-center">
          <span>Kontak & Info</span>
          <i class="fa-solid fa-address-card text-gray-300"></i>
        </h3>
        
        <div class="space-y-5">
          <div class="flex items-start gap-3.5 group">
             <div class="mt-0.5 w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center text-gray-400 group-hover:bg-[#051D47] group-hover:text-white transition-all shrink-0">
               <i class="fa-solid fa-id-badge text-xs"></i>
             </div>
             <div>
               <p class="text-[10px] uppercase font-bold text-gray-400 tracking-wide">NIP / NIDN</p>
               <p class="text-sm font-semibold text-[#051D47]">{{ dosen?.nip || '-' }} / {{ dosen?.nidn || '-' }}</p>
             </div>
          </div>

          <div class="flex items-start gap-3.5 group">
             <div class="mt-0.5 w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center text-gray-400 group-hover:bg-[#FF7F11] group-hover:text-white transition-all shrink-0">
               <i class="fa-solid fa-envelope text-xs"></i>
             </div>
             <div class="min-w-0">
               <p class="text-[10px] uppercase font-bold text-gray-400 tracking-wide">Email</p>
               <a [href]="'mailto:' + dosen?.email" class="text-sm font-semibold text-[#051D47] hover:text-[#FF7F11] transition break-words block">
                 {{ dosen?.email }}
               </a>
             </div>
          </div>

          <div class="flex items-start gap-3.5 group">
             <div class="mt-0.5 w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center text-gray-400 group-hover:bg-[#051D47] group-hover:text-white transition-all shrink-0">
               <i class="fa-solid fa-map-location-dot text-xs"></i>
             </div>
             <div>
               <p class="text-[10px] uppercase font-bold text-gray-400 tracking-wide">Kantor</p>
               <p class="text-sm font-semibold text-[#051D47] leading-snug">{{ dosen?.alamatKantor || 'Gedung Utama Lt. 1' }}</p>
             </div>
          </div>
        </div>

        <div class="mt-8 pt-6 border-t border-gray-100 space-y-2.5">
          <p class="text-xs font-bold text-gray-400 mb-3 uppercase tracking-wider">Profil Eksternal</p>
          
          <ng-container *ngIf="dosen?.linkEksternal?.length; else noLinks">
            <a *ngFor="let link of dosen?.linkEksternal" 
               [href]="link.url" 
               target="_blank"
               class="flex items-center w-full gap-3 px-3 py-2.5 bg-gray-50 hover:bg-white hover:border-[#FF7F11] hover:shadow-sm border border-transparent rounded-lg text-sm font-medium text-gray-600 hover:text-[#FF7F11] transition-all group">
              <i class="fa-solid fa-link text-xs text-gray-400 group-hover:text-[#FF7F11]"></i>
              {{ link.namaPlatform }}
              <i class="fa-solid fa-arrow-up-right-from-square text-[10px] ml-auto opacity-0 group-hover:opacity-100 transition-opacity"></i>
            </a>
          </ng-container>
          
          <ng-template #noLinks>
            <p class="text-xs text-gray-400 italic">Tidak ada tautan eksternal.</p>
          </ng-template>
        </div>

      </div>
    </div>

    <div class="lg:col-span-8 xl:col-span-9 space-y-8">
      
      <div class="bg-white rounded-2xl p-6 md:p-8 shadow-sm border border-gray-200">
        <div class="flex items-center gap-3 mb-6">
          <div class="h-10 w-10 rounded-lg bg-orange-50 flex items-center justify-center text-[#FF7F11] shadow-sm">
            <i class="fa-solid fa-star text-lg"></i>
          </div>
          <h2 class="text-xl font-['Biryani'] font-bold text-[#051D47]">Bidang Keahlian</h2>
        </div>
        
        <div *ngIf="dosen?.bidangKeahlian?.length; else emptySkills" class="flex flex-wrap gap-2.5">
          <span *ngFor="let b of dosen?.bidangKeahlian"
                class="px-4 py-2 bg-[#051D47] text-white border border-[#051D47] rounded-lg text-sm font-medium shadow-sm hover:bg-[#0a2a61] transition-colors cursor-default select-none">
            {{ b.namaKeahlian }}
          </span>
        </div>
        <ng-template #emptySkills>
           <p class="text-sm text-gray-400 italic">Data bidang keahlian belum ditambahkan.</p>
        </ng-template>
      </div>

      <div class="bg-white rounded-2xl p-6 md:p-8 shadow-sm border border-gray-200">
        <div class="flex items-center gap-3 mb-8">
          <div class="h-10 w-10 rounded-lg bg-orange-50 flex items-center justify-center text-[#FF7F11] shadow-sm">
            <i class="fa-solid fa-graduation-cap text-lg"></i>
          </div>
          <h2 class="text-xl font-['Biryani'] font-bold text-[#051D47]">Riwayat Pendidikan</h2>
        </div>

        <div *ngIf="dosen?.pendidikan?.length; else emptyEdu" class="relative border-l-[3px] border-gray-100 ml-3.5 space-y-10 pb-2">
          
          <div *ngFor="let p of dosen?.pendidikan; let last = last" class="relative pl-8 group">
            <div class="absolute -left-[9px] top-1.5 h-[15px] w-[15px] rounded-full bg-[#FF7F11] border-[3px] border-white shadow-sm ring-1 ring-gray-100 group-hover:scale-125 transition-transform"></div>
            
            <div class="flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2">
              <div>
                <h3 class="text-lg font-bold text-[#051D47] leading-tight">{{ p.universitas }}</h3>
                
                <div class="flex items-center gap-2 mt-1">
                  <span class="text-gray-600 font-semibold">{{ p.jenjang }}</span>
                  <span class="text-gray-300">&bull;</span>
                  <span class="text-gray-600">{{ p.jurusan }}</span>
                </div>
                
                <p *ngIf="p.deskripsi" class="text-gray-400 text-sm mt-2 max-w-xl">
                   {{ p.deskripsi }}
                </p>
              </div>
              
              <div class="mt-2 sm:mt-0 shrink-0">
                <span class="inline-block px-3 py-1 bg-gray-100 text-[#051D47] text-xs font-bold rounded-md whitespace-nowrap border border-gray-200">
                  {{ p.tahunMulai }} - {{ p.tahunSelesai }}
                </span>
              </div>
            </div>
          </div>

        </div>
        <ng-template #emptyEdu>
           <p class="text-sm text-gray-400 italic">Data pendidikan belum tersedia.</p>
        </ng-template>
      </div>

      <div class="bg-white rounded-2xl p-6 md:p-8 shadow-sm border border-gray-200">
        <div class="flex items-center justify-between mb-6">
          <div class="flex items-center gap-3">
            <div class="h-10 w-10 rounded-lg bg-orange-50 flex items-center justify-center text-[#FF7F11] shadow-sm">
              <i class="fa-solid fa-chalkboard-user text-lg"></i>
            </div>
            <h2 class="text-xl font-['Biryani'] font-bold text-[#051D47]">Mata Kuliah</h2>
          </div>
        </div>

        <div *ngIf="dosen?.mataKuliah?.length; else emptyTeaching" class="grid md:grid-cols-2 gap-4">
          <div *ngFor="let mk of dosen?.mataKuliah"
               class="p-5 rounded-xl border border-gray-200 bg-[#F8FAFC] hover:bg-white hover:border-[#FF7F11] hover:shadow-md transition-all duration-200 group relative overflow-hidden">
            
            <h4 class="font-bold text-[#051D47] text-lg leading-snug mb-3 group-hover:text-[#FF7F11] transition-colors">
              {{ mk.namaMk }}
            </h4>
            
            <div class="flex items-center justify-between pt-3 border-t border-gray-200/60">
               <div class="flex items-center gap-2 text-sm text-gray-500 font-medium">
                  <i class="fa-solid fa-layer-group text-gray-300"></i>
                  <span>Semester {{ mk.semester }}</span>
               </div>
               
               <span class="text-xs font-bold bg-[#FF7F11] text-white px-2 py-1 rounded">
                  {{ mk.sks }} SKS
               </span>
            </div>
          </div>
        </div>
        <ng-template #emptyTeaching>
           <p class="text-sm text-gray-400 italic">Tidak ada mata kuliah yang diampu saat ini.</p>
        </ng-template>
      </div>

      <div class="bg-white rounded-2xl p-6 md:p-8 shadow-sm border border-gray-200">
        <div class="flex items-center gap-3 mb-6">
          <div class="h-10 w-10 rounded-lg bg-orange-50 flex items-center justify-center text-[#FF7F11] shadow-sm">
            <i class="fa-solid fa-certificate text-lg"></i>
          </div>
          <h2 class="text-xl font-['Biryani'] font-bold text-[#051D47]">Sertifikasi</h2>
        </div>

        <div *ngIf="dosen?.sertifikasi?.length; else emptyCerts" class="space-y-4">
          <div *ngFor="let s of dosen?.sertifikasi" 
               class="flex flex-col md:flex-row md:items-center md:justify-between p-4 rounded-xl border border-gray-100 bg-white hover:border-orange-100 hover:bg-orange-50/30 transition-colors">
             
             <div class="flex items-start gap-4">
               <div class="mt-1.5 h-2 w-2 rounded-full bg-[#FF7F11] shrink-0"></div>
               <div>
                 <p class="text-base font-bold text-[#051D47]">{{ s.namaSertifikasi }}</p>
                 <p class="text-sm text-gray-500 mt-0.5">Penerbit: <span class="font-medium text-gray-700">{{ s.penerbit }}</span></p>
               </div>
             </div>
             
             <div class="mt-3 md:mt-0 pl-6 md:pl-0">
               <span class="inline-flex items-center gap-2 px-3 py-1 bg-white border border-gray-200 text-gray-600 text-xs font-semibold rounded-lg shadow-sm">
                 <i class="fa-regular fa-calendar text-[#FF7F11]"></i>
                 {{ s.tanggalTerbit }}
               </span>
             </div>
          </div>
        </div>
        <ng-template #emptyCerts>
           <div class="text-center py-6 border border-dashed border-gray-200 rounded-xl bg-gray-50">
             <p class="text-sm text-gray-400">Belum ada data sertifikasi.</p>
           </div>
        </ng-template>
      </div>

    </div>
  </div>
</div>
<app-footer></app-footer>